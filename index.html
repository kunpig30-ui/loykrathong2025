<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>‡∏•‡∏≠‡∏¢‡∏Å‡∏£‡∏∞‡∏ó‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ¬∑ ‡∏õ‡∏•‡∏≠‡∏î‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà</title>
  <style>
    :root{ --hdr: 0px; }
    *{ box-sizing:border-box; margin:0; padding:0; }
    html,body{ height:100%; background:#081522; color:#e9f0ff; font-family:system-ui,'TH Sarabun New',Prompt,sans-serif; }

    /* ========== TOP (‡∏≠‡∏¥‡∏ô‡∏û‡∏∏‡∏ï + ‡∏õ‡∏•‡πà‡∏≠‡∏¢) ========== */
    header{
      position:relative; z-index:5;
      padding:10px 12px 6px;
      background:linear-gradient(to bottom,rgba(3,12,24,.95),rgba(3,12,24,.86));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    #topDock{
      max-width:840px; margin:0 auto;
      display:flex; gap:8px; align-items:center; justify-content:center; flex-wrap:wrap;
    }
    #wish{
      flex:1 1 360px; min-width:240px;
      padding:10px 12px; border-radius:12px; border:0; outline:0; color:#0c1424;
    }
    .btn{ padding:10px 14px; border-radius:12px; border:0; font-weight:700; cursor:pointer; }
    .btn.green{ background:#2e7d32; color:#fff; }

    /* ========== ‡∏â‡∏≤‡∏Å (bg + canvas) ========== */
    #stage{ position:relative; z-index:1; width:100%; height:calc(100vh - var(--hdr)); overflow:hidden; }
    #bgLayer{
      display:block; width:100%;
      height:calc(100vh - var(--hdr));
      object-fit:cover; object-position:center top;
      transform:translateY(var(--bg-shift, -26px));
      user-select:none; -webkit-user-drag:none;
    }
    @media(max-width:640px){ #bgLayer{ transform:translateY(var(--bg-shift, -36px)); } }
    #scene{ position:absolute; inset:0; width:100%; height:100%; }

    /* ========== BOTTOM (‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ + ‡πÄ‡∏û‡∏•‡∏á + CSV + ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠) ========== */
    #bottomBar{
      position:sticky; bottom:0; z-index:10;
      background:rgba(6,12,20,.75);
      border-top:1px solid rgba(255,255,255,.10);
      backdrop-filter:blur(4px);
    }
    #bottomInner{
      max-width:980px; margin:0 auto; padding:8px 10px;
      display:flex; flex-wrap:wrap; gap:8px; align-items:center; justify-content:center;
    }
    .chip{ padding:10px 16px; border-radius:12px; border:0; font-weight:700; color:#fff; cursor:pointer; }
    .chip.red{ background:#e53935; }
    .chip.blue{ background:#1e88e5; }
    #wishList{
      list-style:none; width:100%;
      padding:6px 12px 8px; line-height:1.45; font-size:15px;
      max-height:120px; overflow:auto;
    }
    #wishList li{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    /* Toast */
    #toast{
      position:fixed; left:50%; top:calc(var(--hdr) + 10px); translate:-50% 0;
      padding:10px 14px; background:#0e1726; border:1px solid rgba(255,255,255,.25);
      border-radius:14px; opacity:0; pointer-events:none; transition:opacity .25s; z-index:9;
    }
    #toast.show{ opacity:1; }
  </style>
</head>
<body>
  <!-- TOP: ‡∏≠‡∏¥‡∏ô‡∏û‡∏∏‡∏ï + ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏•‡πà‡∏≠‡∏¢ -->
  <header>
    <div id="topDock">
      <input id="wish" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì..." />
      <button id="launch" class="btn green">‡∏õ‡∏•‡πà‡∏≠‡∏¢</button>
    </div>
  </header>

  <!-- STAGE -->
  <div id="stage">
    <img id="bgLayer" src="images/bg5.png" alt="bg">
    <canvas id="scene"></canvas>
  </div>

  <!-- BOTTOM: ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ + ‡πÄ‡∏û‡∏•‡∏á + CSV + ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ -->
  <div id="bottomBar">
    <div id="bottomInner">
      <button class="chip red">‡∏•‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß <span id="statCount">0</span> ‡πÉ‡∏ö</button>
      <button id="toggleMusic" class="chip blue">‚ñ∂Ô∏è/‚è∏ ‡πÄ‡∏û‡∏•‡∏á</button>
      <button id="exportStat" class="chip blue">‚¨áÔ∏è CSV ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</button>
      <ul id="wishList"></ul>
    </div>
  </div>

  <audio id="bgm" preload="auto" loop src="audio/song.mp3"></audio>
  <div id="toast">‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß üéÜ</div>

  <script src="main.js?v=12.1" defer></script>
</body>
</html>
